app: 
  postgres:
    enabled: false

  global:
    name: gm-diploma-project
    namespace: gm-diploma-project-prod
    serviceAccountName: gm-diploma-project-sa
    ingress:
      enabled: true
      className: alb
      host: gmdiplomaproject.elsys.itgix.eu
      annotations:
        alb.ingress.kubernetes.io/scheme: internet-facing
        alb.ingress.kubernetes.io/target-type: ip
        alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'

  apps:
    backend:
      replicaCount: 2
      containerPort: 4000
      image:
        repository: 787587782604.dkr.ecr.eu-central-1.amazonaws.com/gm-diploma-project-ecr-api
        tag: backend-sha-46ad8d0b4bfd6923773ba05d2c1148e03456c5a6
        pullPolicy: Always
      service:
        port: 4000
      ingressPath: /api
      autoscaling:
        enabled: true
        minReplicas: 2
        maxReplicas: 10
        targetCPUUtilizationPercentage: 50 
      resources: 
        requests:
          cpu: "100m"
          memory: "128Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
      env:
        - name: DB_HOST
          value: "gm-diploma-project-db.c3y80gagen20.eu-central-1.rds.amazonaws.com"
        - name: DB_PORT
          value: "5432"
        - name: DB_NAME
          value: "gmdiplomaprojectdb"
        - name: DB_USER
          value: "postgres"
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: gm-diploma-prod-db-secret
              key: password
        - name: DATABASE_URL
          value: "postgresql://$(DB_USER):$(DB_PASSWORD)@$(DB_HOST):$(DB_PORT)/$(DB_NAME)"

    frontend:
      replicaCount: 2
      containerPort: 3000
      image:
        repository: 787587782604.dkr.ecr.eu-central-1.amazonaws.com/gm-diploma-project-ecr-frontend
        tag: frontend-sha-46ad8d0b4bfd6923773ba05d2c1148e03456c5a6
        pullPolicy: Always
      service:
        port: 80
      ingressPath: /
      autoscaling:
        enabled: true 
        minReplicas: 2
        maxReplicas: 5
        targetCPUUtilizationPercentage: 80
      resources:
        requests:
          cpu: "100m"
          memory: "128Mi"
      env:
        - name: NEXT_PUBLIC_API_URL
          value: "/api"